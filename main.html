<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>قبيلة الأشراف</title>
    
    <!-- CSS -->
    <link rel="stylesheet" href="style-login.css"> <!-- لصفحة تسجيل الدخول -->
    <link rel="stylesheet" href="style.css"> <!-- لصفحة الرئيسية -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <!-- أضف هذا السكريبت -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-messaging-compat.js"></script>
</head>
<body>
    <!-- Toast Container -->
    <div id="toastContainer"></div>

    <!-- Notifications Modal -->
    <div class="modal-overlay" id="notificationsModal">
        <div class="modal">
            <div class="modal-header">
                <h3>الإشعارات</h3>
                <button class="close-modal" id="closeNotificationsModal">✕</button>
            </div>
            <div class="notifications-list" id="modalNotificationsList"></div>
        </div>
    </div>

    <!-- Edit Post Modal -->
    <div class="edit-modal-overlay" id="editModal">
        <div class="edit-modal">
            <div class="edit-modal-header">
                <h3><i class="fas fa-edit"></i> تعديل المنشور</h3>
                <button class="close-edit-modal" id="closeEditModal" aria-label="إغلاق">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="edit-modal-content">
                <div class="edit-input-container">
                    <textarea 
                        class="edit-post-input" 
                        id="editPostInput" 
                        placeholder="عدل نص المنشور هنا..."
                        rows="5"
                    ></textarea>
                    <div class="edit-char-count">
                        <span id="editCharCount">0</span> / 1000 حرف
                    </div>
                </div>
                
                <div class="edit-vote-options" id="editVoteOptions">
                    <!-- Vote options will be added here dynamically -->
                </div>
                
                <div class="edit-modal-actions">
                    <button class="edit-modal-btn cancel" id="cancelEditBtn">
                        <i class="fas fa-times"></i>
                        <span>إلغاء</span>
                    </button>
                    <button class="edit-modal-btn save" id="saveEditBtn">
                        <i class="fas fa-save"></i>
                        <span>حفظ التعديلات</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Confirm Delete Modal -->
    <div class="confirm-modal-overlay" id="confirmDeleteModal">
        <div class="confirm-modal">
            <div class="confirm-modal-icon">
                <i class="fas fa-exclamation-triangle"></i>
            </div>
            <div class="confirm-modal-content">
                <h3><i class="fas fa-trash-alt"></i> حذف المنشور</h3>
                <p>هل أنت متأكد أنك تريد حذف هذا المنشور؟<br>هذا الإجراء لا يمكن التراجع عنه.</p>
                <div class="confirm-modal-actions">
                    <button class="confirm-modal-btn cancel" id="cancelDeleteBtn">
                        <i class="fas fa-times"></i>
                        <span>إلغاء</span>
                    </button>
                    <button class="confirm-modal-btn delete" id="confirmDeleteBtn">
                        <i class="fas fa-trash-alt"></i>
                        <span>نعم، احذف</span>
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Header -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-crown"></i>
            <span>قبيلة الأشراف</span>
        </div>
        
        <div class="header-right">
            <div class="notification-bell" id="notificationBell">
                <i class="fas fa-bell"></i>
                <span class="notification-count" id="notificationCount">0</span>
            </div>
            <div class="user-avatar" id="userAvatar">أ</div>
        </div>
    </header>

    <!-- Main Content -->
    <main class="main-content">
        <!-- Create Post -->
        <div class="create-post">
            <div class="create-post-header">
                <div class="user-avatar" id="postAvatar">أ</div>
                <div style="flex: 1;">
                    <div class="post-type-selector">
                        <button class="post-type-btn active" data-type="text">
                            <i class="fas fa-pen"></i><span>نص</span>
                        </button>
                        <button class="post-type-btn" data-type="vote">
                            <i class="fas fa-poll"></i><span>تصويت</span>
                        </button>
                    </div>
                    
                    <div class="post-input-container">
                        <textarea class="post-input" id="postInput" placeholder="ماذا يدور في ذهنك ؟" rows="1"></textarea>
                    </div>
                    
                    <!-- Vote Options -->
                    <div class="vote-options-container" id="voteOptionsContainer">
                        <div class="vote-option"><input type="text" placeholder="الخيار الأول" class="vote-option-input"></div>
                        <div class="vote-option"><input type="text" placeholder="الخيار الثاني" class="vote-option-input"></div>
                        <button class="add-option-btn" id="addOptionBtn"><i class="fas fa-plus"></i><span>إضافة خيار</span></button>
                    </div>
                </div>
            </div>
            
            <div class="post-actions">
                <button class="post-submit-btn" id="submitPost"><i class="fas fa-paper-plane"></i><span>نشر</span></button>
            </div>
        </div>

        <!-- Posts Feed -->
        <div class="posts-feed" id="postsContainer"></div>
    </main>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <button class="nav-item active"><i class="fas fa-home"></i><span>الرئيسية</span></button>
        <button class="nav-item"><i class="fas fa-users"></i><span>المجموعات</span></button>
        <button class="nav-item"><i class="fas fa-plus-circle"></i><span>نشر</span></button>
        <button class="nav-item"><i class="fas fa-bell"></i><span>إشعارات</span></button>
        <button class="nav-item" id="logoutBtnNav"><i class="fas fa-sign-out-alt"></i><span>خروج</span></button>
    </nav>

    <!-- JavaScript -->
    <script src="app.js"></script>
</body>
</html>

